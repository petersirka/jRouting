!function(c){var f={},h={LIMIT_HISTORY:100,LIMIT_HISTORY_ERROR:100,version:'v5.3.0',cache:{},routes:[],$prev:[],$next:[],errors:[],global:{},query:{},params:[],middlewares:{},repository:{},url:'',model:null,isFirst:!0,isReady:!1,isRefresh:!1,isModernBrowser:!!history.pushState,hashtags:!1,count:0};h.history=h.$prev;var s=location;function r(){h.async(),$(document).ready(function(){h.async(),h.hashtags?h.url=s.hash||f.path(f.prepareUrl(s.pathname)):h.url=f.path(f.prepareUrl(s.pathname)),setTimeout(function(){h.isReady=!0,h.location(h.url)},5),$(window).on('hashchange',function(){h.isReady&&h.hashtags&&h.location(f.path(s.hash))}),$(window).on('popstate',function(){if(h.isReady&&!h.hashtags){var r=f.path(s.pathname);h.url!==r&&h.location(r)}})})}!c.jR&&(c.jR=h),!c.NAVIGATION&&(c.NAVIGATION=h),!c.NAV&&(c.NAV=h),h.remove=function(r){r=r.env(!0).ROOT(!0);for(var t=[],e=0,n=h.routes.length;e<n;e++)h.routes[e].id!==r&&t.push(h.routes[e]);return h.routes=t,h},h.on=function(r,t){return ON(r,t),h},h.emit=function(){EMIT.apply(window,arguments)},h.autosave=function(){h.$save=1},h.save=function(){try{localStorage.setItem(MAIN.$localstorage+'.nav',STRINGIFY({prev:h.$prev,next:h.$next,ts:new Date}))}catch(r){}},h.load=function(){try{var r=PARSE(localStorage.getItem(MAIN.$localstorage+'.nav')||'null');r&&(r.prev instanceof Array&&(h.$prev=h.history=r.prev),r.next instanceof Array&&(h.$next=r.next),h.$pop=!0)}catch(r){}},h.route=function(r,t,e,n){if(t instanceof Array){var i=e;e=t,t=i}'function'==typeof e&&(i=n,n=e,e=i);var o=(r=r.env(!0).ROOT(!0)).jRcount('/')+(-1===r.indexOf('*')?0:10),a=h._route(r.trim()),u=[];'string'==typeof e&&(e=e.split(','));var s=[],l=[],p={};if(e instanceof Array&&e.forEach(function(r){'object'==typeof r?p=r:'@'===r.substring(0,1)?l.push(r.substring(1)):s.push(r)}),-1!==r.indexOf('{')){o-=100;for(var f=0;f<a.length;f++)'{'===a[f].substring(0,1)&&u.push(f);o-=u.length}return h.remove(r),h.routes.push({id:r,url:a,fn:t,priority:o,params:u,middleware:s.length?s:null,init:n,count:0,pending:!1,options:p,roles:l}),h.routes.sort(function(r,t){return r.priority>t.priority?-1:r.priority<t.priority?1:0}),h.is404&&r===h.url&&c.REDIRECT(r+(h.queryraw?'?'+h.queryraw:'')),h.emit('route',r),h},c.MIDDLEWARE=h.middleware=function(r,t){return r instanceof Array?r.wait(function(r,t){var e=h.middlewares[r];e?e(t):t()},t):h.middlewares[r]=t,h},h.refresh=function(){return h.location(h.url,!0)},h.reload=function(){return h.refresh()},h.async=function(){if(c.jRoute&&c.jRoute.length){for(;;){var r=c.jRoute.shift();if(!r)break;r()}h.is404&&h.location(h.url)}},h._route=function(r){47===r.charCodeAt(0)&&(r=r.substring(1)),47===r.charCodeAt(r.length-1)&&(r=r.substring(0,r.length-1));var t=r.split('/');return 1!==t.length||t[0]||(t[0]='/'),t},h._route_param=function(r,t){var e=[];if(!t||!r)return e;var n=t.params.length;if(n)for(var i=0;i<n;i++){var o=r[t.params[i]];e.push('/'===o?'':o)}return e},h._route_compare=function(r,t){var e=r.length,n=1===e&&'/'===r[0];if(t.length!==e)return!1;for(var i=0;i<e;i++){var o=t[i];if(!o)return!1;if(n||123!==o.charCodeAt(0)){if('*'===o)return!0;if(r[i]!==o)return!1}}return!0},h.location=function(r,t){if(h.isReady){var e=r.indexOf('?');-1!==e&&(r=r.substring(0,e)),r=f.prepareUrl(r),r=f.path(r);var n=h._route(r),i=[],o=!0,a=[];a.push.apply(a,n);for(var u=0,s=n.length;u<s;u++)n[u]=n[u].toLowerCase();h.isRefresh=t||!1,h.count++,!t&&h.url.length&&h.prev()!==h.url&&(h.$pop?h.$pop=!1:(h.$prev.push(h.url),h.$prev.length>h.LIMIT_HISTORY&&h.$prev.shift(),h.$next.length>h.LIMIT_HISTORY&&h.$next.shift(),h.$save&&h.save())),h.isback!==h.$prev.length&&SET('NAV.isback',h.$prev.length),h.isforward!==h.$next.length&&SET('NAV.isforward',h.$next.length);for(s=h.routes.length,u=0;u<s;u++){var l=h.routes[u];if(h._route_compare(n,l.url)&&(-1===l.url.indexOf('*')&&(o=!1),!(l.once&&0<l.count))){l.count++,i.push(l);break}}h.url.length&&(h.cache[h.url]=h.repository);var p=h.url;h.url=r,h.url!==p&&UPDATE('NAV.url'),h.repository=h.cache[r],h.repository||(h.repository={}),h._params(),h.params=h._route_param(a,l),h.is404=!1,h.emit('location',r),s=i.length;for(u=0;u<s;u++){if(!(l=i[u]).pending)if(l.middleware&&l.middleware.length)!function(t){for(var r=t.middleware.length,n=[],e=0;e<r;e++){var i=h.middlewares[t.middleware[e]];i&&function(t,e){n.push(function(r){e.call(h,r,t.options,t.roles,t)})}(t,i)}if(!t.init)return t.pending=!0,n.jRmiddleware(function(r){!r&&t.fn.apply(h,h.params),t.pending=!1},t);t.pending=!0,t.init(function(){n.jRmiddleware(function(r){!r&&t.fn.apply(h,h.params),t.pending=!1},t)}),t.init=null}(l);else{if(!l.init){l.fn.apply(h,h.params);continue}l.pending=!0,function(r){r.init(function(){r.fn.apply(h,h.params),r.pending=!1})}(l),l.init=null}}o?(h.is404=!0,h.status(404,new Error('Route not found.'))):h.is404=!1}},h.prev=function(){return h.$prev[h.$prev.length-1]},h.next=function(){return h.$next[h.$next.length-1]},h.back=function(r){var t=h.$prev.pop()||'/';return h.url&&h.next()!==h.url&&h.$next.push(h.url),h.url='',c.REDIRECT(t,r),h.$save&&h.save(),h},h.forward=function(r){var t=h.$next.pop()||'/';return h.url&&h.prev()!==h.url&&h.$prev.push(h.url),h.url='',c.REDIRECT(t,r),h.$save&&h.save(),h},h.status=function(r,t){return EMIT(r,t),h},c.REDIRECT=NAV.redirect=function(r,t){r||(r=h.url);var e=(r=r.env(!0).ROOT(!0)).charCodeAt(0),n=s;return 35===e?(h.model=t||null,n.hash=r,h.location(r,!1),h):h.isModernBrowser?(history.pushState(null,null,r),h.model=t||null,h.location(n.pathname+n.search,!1),h):(n.href=r,!1)},h._params=function(){var r={},t=s.href.indexOf('?');h.queryraw=-1===t?'':s.href.substring(t+1);for(var e=h.queryraw.split('&'),n=0;n<e.length;n++){var i=e[n].split('=');if(2===i.length){var o=decodeURIComponent(i[0]),a=decodeURIComponent(i[1]),u=r[o]instanceof Array;r[o]&&!u&&(r[o]=[r[o]]),u?r[o].push(a):r[o]=a}}return h.query=r,h},h.path=f.path=function(r,t){if('#'===r.substring(0,1))return r;t||(t='/');var e=r.indexOf('?'),n='';-1!==e&&(n=r.substring(e),r=r.substring(0,e));var i=r.length;return r.substring(i-1,i)!==t&&(r+=t),r+n},f.prepareUrl=function(r){if('#'===r.substring(0,1))return r;var t=r.indexOf('#');return-1!==t?r.substring(0,t):r},Array.prototype.jRmiddleware=function(t,e){var n=this,r=n.shift();return void 0===r?t&&t():r(function(r){r instanceof Error||!1===r?t&&t(!1===r||r):setTimeout(function(){n.jRmiddleware(t,e)},1)},e.options,e.roles),n},String.prototype.jRcount=function(r){for(var t=0,e=0;0<(t=this.indexOf(r,t+r.length))&&e++,0<t;);return e},h.clientside=function(r){return $(document).on('click',r,function(r){r.preventDefault();var t=$(this),e=t.attr('href')||t.attr('data-jrouting')||t.attr('data-jr');'javascript:void(0)'!==e&&'#'!==e&&c.REDIRECT(e)}),h},c.jQuery?r():h.init=setInterval(function(){c.jQuery&&c.MAIN&&(clearInterval(h.init),r())},100),setTimeout(h.async,500),setTimeout(h.async,1e3),setTimeout(h.async,2e3),setTimeout(h.async,3e3),setTimeout(h.async,5e3),c.ROUTE=function(r,t,e,n){return h.route(r,t,e,n)}}(window);