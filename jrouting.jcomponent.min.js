!function(r){function t(){e.async(),$.fn.jRouting=function(r){if(e.hashtags||!e.isModernBrowser)return this;if(+$.fn.jquery.replace(/\./g,'')>=300&&!0===r)throw Error('$(selector).jRouting() doesn\'t work in jQuery +3. Instead of this use jR.clientside(selector).');var t=function(r){r.preventDefault(),e.redirect($(this).attr('href'))};return r?$(document).on('click',this.selector,t):this.filter('a').bind('click',t),this},$(document).ready(function(){e.async(),e.hashtags?e.url=location.hash||n.path(n.prepareUrl(location.pathname)):e.url=n.path(n.prepareUrl(location.pathname)),setTimeout(function(){e.isReady=!0,e.location(e.url)},5),$(window).on('hashchange',function(){e.isReady&&e.hashtags&&e.location(n.path(location.hash))}),$(window).on('popstate',function(){if(e.isReady&&!e.hashtags){var r=n.path(location.pathname);e.url!==r&&e.location(r)}})})}var n={},e={LIMIT_HISTORY:100,LIMIT_HISTORY_ERROR:100,version:'v5.0.1',cache:{},routes:[],history:[],errors:[],global:{},query:{},params:[],middlewares:{},repository:{},url:'',model:null,isFirst:!0,isReady:!1,isRefresh:!1,isModernBrowser:!!history.pushState,hashtags:!1,count:0};!r.jR&&(r.jR=e),!r.NAVIGATION&&(r.NAVIGATION=e),!r.NAV&&(r.NAV=e),e.remove=function(r){r=r.env(!0);for(var t=[],n=0,i=e.routes.length;n<i;n++)e.routes[n].id!==r&&t.push(e.routes[n]);return e.routes=t,e},e.on=function(r,t){return ON(r,t),e},e.emit=function(){EMIT.apply(window,arguments)},e.route=function(r,t,n,i){if(t instanceof Array){var o=n;n=t,t=o}'function'==typeof n&&(o=i,i=n,n=o);var a=(r=r.env(!0)).jRcount('/')+(-1===r.indexOf('*')?0:10),u=e._route(r.trim()),s=[];'string'==typeof n&&(n=n.split(','));var l=[],c=[],f={};if(n instanceof Array&&n.forEach(function(r){'object'==typeof r?f=r:'@'===r.substring(0,1)?c.push(r.substring(1)):l.push(r)}),-1!==r.indexOf('{')){a-=100;for(var h=0;h<u.length;h++)'{'===u[h].substring(0,1)&&s.push(h);a-=s.length}return e.remove(r),e.routes.push({id:r,url:u,fn:t,priority:a,params:s,middleware:l.length?l:null,init:i,count:0,pending:!1,options:f,roles:c}),e.routes.sort(function(r,t){return r.priority>t.priority?-1:r.priority<t.priority?1:0}),e.is404&&r===e.url&&e.redirect(r+(e.queryraw?'?'+e.queryraw:'')),e},r.MIDDLEWARE=e.middleware=function(r,t){return e.middlewares[r]=t,e},e.refresh=function(){return e.location(e.url,!0)},e.reload=function(){return e.refresh()},e.async=function(){if(r.jRoute&&r.jRoute.length){for(;;){var t=r.jRoute.shift();if(!t)break;t()}e.is404&&e.location(e.url)}},e._route=function(r){47===r.charCodeAt(0)&&(r=r.substring(1)),47===r.charCodeAt(r.length-1)&&(r=r.substring(0,r.length-1));var t=r.split('/');return 1!==t.length||t[0]||(t[0]='/'),t},e._route_param=function(r,t){var n=[];if(!t||!r)return n;var e=t.params.length;if(e)for(var i=0;i<e;i++){var o=r[t.params[i]];n.push('/'===o?'':o)}return n},e._route_compare=function(r,t){var n=r.length,e=1===n&&'/'===r[0];if(t.length!==n)return!1;for(var i=0;i<n;i++){var o=t[i];if(!o)return!1;if(e||123!==o.charCodeAt(0)){if('*'===o)return!0;if(r[i]!==o)return!1}}return!0},e.location=function(r,t){if(e.isReady){var i=r.indexOf('?');-1!==i&&(r=r.substring(0,i)),r=n.prepareUrl(r),r=n.path(r);var o=e._route(r),a=[],u=!0,s=[];s.push.apply(s,o);for(var l=0,c=o.length;l<c;l++)o[l]=o[l].toLowerCase();e.isRefresh=t||!1,e.count++,!t&&e.url.length&&e.history[e.history.length-1]!==e.url&&(e.history.push(e.url),e.history.length>e.LIMIT_HISTORY&&e.history.shift());for(var c=e.routes.length,l=0;l<c;l++){var f=e.routes[l];if(e._route_compare(o,f.url)&&(-1===f.url.indexOf('*')&&(u=!1),!(f.once&&f.count>0))){f.count++,a.push(f);break}}e.url.length&&(e.cache[e.url]=e.repository),e.url=r,e.repository=e.cache[r],e.repository||(e.repository={}),e._params(),e.params=e._route_param(s,f),e.is404=!1,e.emit('location',r),c=a.length;for(l=0;l<c;l++)if(!(f=a[l]).pending)if(f.middleware&&f.middleware.length)!function(r){for(var t=r.middleware.length,n=[],i=0;i<t;i++){var o=e.middlewares[r.middleware[i]];o&&function(r,t){n.push(function(n){t.call(e,n,r.options,r.roles,r)})}(r,o)}if(!r.init)return r.pending=!0,void n.jRmiddleware(function(t){!t&&r.fn.apply(e,e.params),r.pending=!1},r);r.pending=!0,r.init(function(){n.jRmiddleware(function(t){!t&&r.fn.apply(e,e.params),r.pending=!1},r)}),r.init=null}(f);else{if(!f.init){f.fn.apply(e,e.params);continue}f.pending=!0,function(r){r.init(function(){r.fn.apply(e,e.params),r.pending=!1})}(f),f.init=null}u?(e.is404=!0,e.status(404,new Error('Route not found.'))):e.is404=!1}},e.prev=function(){return e.history[e.history.length-1]},e.back=function(){var r=e.history.pop()||'/';return e.url='',e.redirect(r,!0),e},e.status=function(r,t){return EMIT(r,t),e},e.redirect=r.REDIRECT=function(r,t){var n=(r=r.env(!0)).charCodeAt(0),i=location;return 35===n?(e.model=t||null,i.hash=r,e.location(r,!1),e):e.isModernBrowser?(history.pushState(null,null,r),e.model=t||null,e.location(i.pathname+i.search,!1),e):(i.href=r,!1)},e._params=function(){var r={},t=location.href.indexOf('?');e.queryraw=-1===t?'':location.href.substring(t+1);for(var n=e.queryraw.split('&'),i=0;i<n.length;i++){var o=n[i].split('=');if(2===o.length){var a=decodeURIComponent(o[0]),u=decodeURIComponent(o[1]),s=r[a]instanceof Array;r[a]&&!s&&(r[a]=[r[a]]),s?r[a].push(u):r[a]=u}}return e.query=r,e},e.path=n.path=function(r,t){if('#'===r.substring(0,1))return r;t||(t='/');var n=r.indexOf('?'),e='';-1!==n&&(e=r.substring(n),r=r.substring(0,n));var i=r.length;return r.substring(i-1,i)!==t&&(r+=t),r+e},n.prepareUrl=function(r){if('#'===r.substring(0,1))return r;var t=r.indexOf('#');return-1!==t?r.substring(0,t):r},Array.prototype.jRmiddleware=function(r,t){var n=this,e=n.shift();return void 0===e?(r&&r(),n):(e(function(e){e instanceof Error||!1===e?r&&r(!1===e||e):setTimeout(function(){n.jRmiddleware(r,t)},1)},t.options,t.roles),n)},String.prototype.jRcount=function(r){var t=0,n=0;do{(t=this.indexOf(r,t+r.length))>0&&n++}while(t>0);return n},e.clientside=function(r){return $(document).on('click',r,function(r){r.preventDefault();var t=$(this),n=t.attr('href')||t.attr('data-jrouting')||t.attr('data-jr');'javascript:void(0)'!==n&&'#'!==n&&e.redirect(n)}),e},r.jQuery?t():e.init=setInterval(function(){r.jQuery&&r.MAIN&&(clearInterval(e.init),t())},100),setTimeout(e.async,500),setTimeout(e.async,1e3),setTimeout(e.async,2e3),setTimeout(e.async,3e3),setTimeout(e.async,5e3),r.ROUTE=function(r,t,n,i){return e.route(r,t,n,i)}}(window);