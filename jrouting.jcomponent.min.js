!function(r){function t(){e.async(),$(document).ready(function(){e.async(),e.hashtags?e.url=i.hash||n.path(n.prepareUrl(i.pathname)):e.url=n.path(n.prepareUrl(i.pathname)),setTimeout(function(){e.isReady=!0,e.location(e.url)},5),$(window).on('hashchange',function(){e.isReady&&e.hashtags&&e.location(n.path(i.hash))}),$(window).on('popstate',function(){if(e.isReady&&!e.hashtags){var r=n.path(i.pathname);e.url!==r&&e.location(r)}})})}var n={},e={LIMIT_HISTORY:100,LIMIT_HISTORY_ERROR:100,version:'v5.3.0',cache:{},routes:[],$prev:[],$next:[],errors:[],global:{},query:{},params:[],middlewares:{},repository:{},url:'',model:null,isFirst:!0,isReady:!1,isRefresh:!1,isModernBrowser:!!history.pushState,hashtags:!1,count:0};e.history=e.$prev;var i=location;!r.jR&&(r.jR=e),!r.NAVIGATION&&(r.NAVIGATION=e),!r.NAV&&(r.NAV=e),e.remove=function(r){r=r.env(!0).ROOT(!0);for(var t=[],n=0,i=e.routes.length;n<i;n++)e.routes[n].id!==r&&t.push(e.routes[n]);return e.routes=t,e},e.on=function(r,t){return ON(r,t),e},e.emit=function(){EMIT.apply(window,arguments)},e.autosave=function(){e.$save=1},e.save=function(){try{localStorage.setItem(MAIN.$localstorage+'.nav',STRINGIFY({prev:e.$prev,next:e.$next,ts:new Date}))}catch(r){}},e.load=function(r){try{var t=PARSE(localStorage.getItem(MAIN.$localstorage+'.nav')||'null');t&&(t.prev instanceof Array&&(e.$prev=e.history=t.prev),t.next instanceof Array&&(e.$next=t.next),e.$pop=!0)}catch(r){}},e.route=function(t,n,i,o){if(n instanceof Array){var a=i;i=n,n=a}'function'==typeof i&&(a=o,o=i,i=a);var u=(t=t.env(!0).ROOT(!0)).jRcount('/')+(-1===t.indexOf('*')?0:10),s=e._route(t.trim()),l=[];'string'==typeof i&&(i=i.split(','));var p=[],f=[],c={};if(i instanceof Array&&i.forEach(function(r){'object'==typeof r?c=r:'@'===r.substring(0,1)?f.push(r.substring(1)):p.push(r)}),-1!==t.indexOf('{')){u-=100;for(var h=0;h<s.length;h++)'{'===s[h].substring(0,1)&&l.push(h);u-=l.length}return e.remove(t),e.routes.push({id:t,url:s,fn:n,priority:u,params:l,middleware:p.length?p:null,init:o,count:0,pending:!1,options:c,roles:f}),e.routes.sort(function(r,t){return r.priority>t.priority?-1:r.priority<t.priority?1:0}),e.is404&&t===e.url&&r.REDIRECT(t+(e.queryraw?'?'+e.queryraw:'')),e.emit('route',t),e},r.MIDDLEWARE=e.middleware=function(r,t){return r instanceof Array?(r.wait(function(r,t){var n=e.middlewares[r];n?n(t):t()},t),e):(e.middlewares[r]=t,e)},e.refresh=function(){return e.location(e.url,!0)},e.reload=function(){return e.refresh()},e.async=function(){if(r.jRoute&&r.jRoute.length){for(;;){var t=r.jRoute.shift();if(!t)break;t()}e.is404&&e.location(e.url)}},e._route=function(r){47===r.charCodeAt(0)&&(r=r.substring(1)),47===r.charCodeAt(r.length-1)&&(r=r.substring(0,r.length-1));var t=r.split('/');return 1!==t.length||t[0]||(t[0]='/'),t},e._route_param=function(r,t){var n=[];if(!t||!r)return n;var e=t.params.length;if(e)for(var i=0;i<e;i++){var o=r[t.params[i]];n.push('/'===o?'':o)}return n},e._route_compare=function(r,t){var n=r.length,e=1===n&&'/'===r[0];if(t.length!==n)return!1;for(var i=0;i<n;i++){var o=t[i];if(!o)return!1;if(e||123!==o.charCodeAt(0)){if('*'===o)return!0;if(r[i]!==o)return!1}}return!0},e.location=function(r,t){if(e.isReady){var i=r.indexOf('?');-1!==i&&(r=r.substring(0,i)),r=n.prepareUrl(r),r=n.path(r);var o=e._route(r),a=[],u=!0,s=[];s.push.apply(s,o);for(var l=0,p=o.length;l<p;l++)o[l]=o[l].toLowerCase();e.isRefresh=t||!1,e.count++,!t&&e.url.length&&e.prev()!==e.url&&(e.$pop?e.$pop=!1:(e.$prev.push(e.url),e.$prev.length>e.LIMIT_HISTORY&&e.$prev.shift(),e.$next.length>e.LIMIT_HISTORY&&e.$next.shift(),e.$save&&e.save()));for(var p=e.routes.length,l=0;l<p;l++){var f=e.routes[l];if(e._route_compare(o,f.url)&&(-1===f.url.indexOf('*')&&(u=!1),!(f.once&&f.count>0))){f.count++,a.push(f);break}}e.url.length&&(e.cache[e.url]=e.repository),e.url=r,e.repository=e.cache[r],e.repository||(e.repository={}),e._params(),e.params=e._route_param(s,f),e.is404=!1,e.emit('location',r),p=a.length;for(l=0;l<p;l++)if(!(f=a[l]).pending)if(f.middleware&&f.middleware.length)!function(r){for(var t=r.middleware.length,n=[],i=0;i<t;i++){var o=e.middlewares[r.middleware[i]];o&&function(r,t){n.push(function(n){t.call(e,n,r.options,r.roles,r)})}(r,o)}if(!r.init)return r.pending=!0,void n.jRmiddleware(function(t){!t&&r.fn.apply(e,e.params),r.pending=!1},r);r.pending=!0,r.init(function(){n.jRmiddleware(function(t){!t&&r.fn.apply(e,e.params),r.pending=!1},r)}),r.init=null}(f);else{if(!f.init){f.fn.apply(e,e.params);continue}f.pending=!0,function(r){r.init(function(){r.fn.apply(e,e.params),r.pending=!1})}(f),f.init=null}u?(e.is404=!0,e.status(404,new Error('Route not found.'))):e.is404=!1}},e.prev=function(){return e.$prev[e.$prev.length-1]},e.next=function(){return e.$next[e.$next.length-1]},e.back=function(t){var n=e.$prev.pop()||'/';return e.url&&e.next()!==e.url&&e.$next.push(e.url),e.url='',r.REDIRECT(n,t),e.$save&&e.save(),e},e.forward=function(t){var n=e.$next.pop()||'/';return e.url&&e.prev()!==e.url&&e.$prev.push(e.url),e.url='',r.REDIRECT(n,t),e.$save&&e.save(),e},e.status=function(r,t){return EMIT(r,t),e},r.REDIRECT=function(r,t){r||(r=e.url);var n=(r=r.env(!0).ROOT(!0)).charCodeAt(0),o=i;return 35===n?(e.model=t||null,o.hash=r,e.location(r,!1),e):e.isModernBrowser?(history.pushState(null,null,r),e.model=t||null,e.location(o.pathname+o.search,!1),e):(o.href=r,!1)},e._params=function(){var r={},t=i.href.indexOf('?');e.queryraw=-1===t?'':i.href.substring(t+1);for(var n=e.queryraw.split('&'),o=0;o<n.length;o++){var a=n[o].split('=');if(2===a.length){var u=decodeURIComponent(a[0]),s=decodeURIComponent(a[1]),l=r[u]instanceof Array;r[u]&&!l&&(r[u]=[r[u]]),l?r[u].push(s):r[u]=s}}return e.query=r,e},e.path=n.path=function(r,t){if('#'===r.substring(0,1))return r;t||(t='/');var n=r.indexOf('?'),e='';-1!==n&&(e=r.substring(n),r=r.substring(0,n));var i=r.length;return r.substring(i-1,i)!==t&&(r+=t),r+e},n.prepareUrl=function(r){if('#'===r.substring(0,1))return r;var t=r.indexOf('#');return-1!==t?r.substring(0,t):r},Array.prototype.jRmiddleware=function(r,t){var n=this,e=n.shift();return void 0===e?(r&&r(),n):(e(function(e){e instanceof Error||!1===e?r&&r(!1===e||e):setTimeout(function(){n.jRmiddleware(r,t)},1)},t.options,t.roles),n)},String.prototype.jRcount=function(r){var t=0,n=0;do{(t=this.indexOf(r,t+r.length))>0&&n++}while(t>0);return n},e.clientside=function(t){return $(document).on('click',t,function(t){t.preventDefault();var n=$(this),e=n.attr('href')||n.attr('data-jrouting')||n.attr('data-jr');'javascript:void(0)'!==e&&'#'!==e&&r.REDIRECT(e)}),e},r.jQuery?t():e.init=setInterval(function(){r.jQuery&&r.MAIN&&(clearInterval(e.init),t())},100),setTimeout(e.async,500),setTimeout(e.async,1e3),setTimeout(e.async,2e3),setTimeout(e.async,3e3),setTimeout(e.async,5e3),r.ROUTE=function(r,t,n,i){return e.route(r,t,n,i)}}(window);